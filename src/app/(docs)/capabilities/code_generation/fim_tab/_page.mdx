import { Tabs, TabItem } from '@/components/common/multi-codeblock';
import { SectionTab } from '@/components/layout/section-tab';
import {
  ExplorerTabs,
  ExplorerTab,
} from '@/components/common/explorer-tabs';

import FIMExampleTab from './fim_example_tab/_page.mdx';
import CompletionExampleTab from './completion_example_tab/_page.mdx';
import StopTokensExampleTab from './stop_tokens_example_tab/_page.mdx';

With this feature, users can define the starting point of the code using a `prompt`, and the ending point of the code using an optional `suffix` and an optional `stop`. The FIM model will then generate the code that fits in between, making it ideal for tasks that require a specific piece of code to be generated.

:::tip[ ]
We also provide the `min_tokens` and `max_tokens` sampling parameters, which are particularly useful for code generation as it allows you to set the minimum and maximum number of tokens that should be produced. This is especially useful when FIM models decide to produce no tokens at all, or are overly verbose, allowing developers to enforce completions within a specific range if they are needed.
:::

<SectionTab as="h2" variant="secondary" sectionId="codestral">Codestral</SectionTab>

Codestral is a cutting-edge generative model that has been specifically designed and optimized for code generation tasks, including fill-in-the-middle and code completion. Codestral was trained on 80+ programming languages, enabling it to perform well on both common and less common languages. 

:::important[ ]
We currently offer two domains for Codestral endpoints, both providing FIM and instruct routes:

| Domain  | Features |
| ------------- | ------------- |
| codestral.mistral.ai | - Monthly subscription based, currently free to use <br/> - Requires a new key for which a phone number is needed |
| api.mistral.ai  | - Allows you to use your existing API key and you can pay to use Codestral <br/> - Ideal for business use |

Wondering which endpoint to use?
- If you're a user, wanting to query Codestral as part of an IDE plugin, codestral.mistral.ai is recommended.
- If you're building a plugin, or anything that exposes these endpoints directly to the user, and expect them to bring their own API keys, you should also target codestral.mistral.ai
- For all other use cases, api.mistral.ai will be better suited

*This guide uses api.mistral.ai for demonstration.*
:::

Below we present three approaches to using Codestral for code generation.

<ExplorerTabs>
    <ExplorerTab value="fill-in-the-middle" label="Fill In The Middle">
        <FIMExampleTab/>
    </ExplorerTab>
    <ExplorerTab value="completion" label="Completion">
        <CompletionExampleTab/>
    </ExplorerTab>
    <ExplorerTab value="stop-tokens" label="Stop Tokens">
        <StopTokensExampleTab/>
    </ExplorerTab>
</ExplorerTabs>