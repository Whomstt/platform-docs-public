import { SectionTab } from '@/components/layout/section-tab';
import { Tabs, TabItem } from '@/components/common/multi-codeblock';

A batch file for chat completions, with `v1/chat/completions` as the Endpoint and `ministral-3b-latest` as the Model, would look like the following:

<Tabs groupId="code">
    <TabItem value="file" label="Batch File" default>

```bash
{"custom_id": "0", "body": {"max_tokens": 128, "messages": [{"role": "user", "content": "What is the best French cheese?"}]}}
{"custom_id": "1", "body": {"max_tokens": 512, "temperature": 0.2, "messages": [{"role": "user", "content": "What is the best French wine?"}]}}
{"custom_id": "2", "body": {"max_tokens": 256, "temperature": 0.8, "messages": [{"role": "user", "content": "What is the best French pastry?"}]}}
```

    </TabItem>
    <TabItem value="output" label="Result File">

```bash
{"id":"batch-cd0da3ab-1-377e2e82-7cbb-4f72-bc67-533512f70955","custom_id":"0","response":{"status_code":200,"body":{"id":"85bcfa450e5643f2a2aed46472d97ffd","object":"chat.completion","model":"ministral-3b-latest","usage":{"prompt_tokens":10,"completion_tokens":128,"total_tokens":138},"created":1761577934,"choices":[{"index":0,"finish_reason":"length","message":{"role":"assistant","content":"Choosing the \"best\" French cheese can be quite subjective as it depends on personal preferences, but here are a few highly regarded French cheeses that are often considered among the best:\n\n1. **Camembert de Normandie**: This is a soft, creamy cheese with a pungent aroma. It's known for its rich, buttery flavor and is often served as a table cheese.\n\n2. **Roquefort**: This is a blue cheese made from sheep's milk. It has a strong, salty flavor and a crumbly texture. It's often used in salads and as a topping for bread.\n\n","tool_calls":null}}]}},"error":null}
{"id":"batch-cd0da3ab-2-a2b7dcce-43ad-4d44-ac8c-d8d037848b24","custom_id":"1","response":{"status_code":200,"body":{"id":"628f9e211fb94641a170856f93740410","object":"chat.completion","model":"ministral-3b-latest","usage":{"prompt_tokens":10,"completion_tokens":458,"total_tokens":468},"created":1761577934,"choices":[{"index":0,"finish_reason":"stop","message":{"role":"assistant","content":"Choosing the \"best\" French wine can be quite subjective as it depends on personal preferences, such as the type of wine you enjoy (red, white, rosé, sparkling, etc.), the region you prefer, and the occasion for which you're drinking. However, here are a few highly regarded French wines that are often considered among the best:\n\n1. **Château Lafite Rothschild (Bordeaux, France)**: This is a first growth (Premier Cru) wine from the Médoc region, known for its complexity and longevity.\n\n2. **Château Margaux (Bordeaux, France)**: Another first growth wine, Margaux is renowned for its elegance and balance.\n\n3. **Château Latour (Bordeaux, France)**: This is a first growth wine from the Médoc region, known for its power and depth.\n\n4. **Château Mouton Rothschild (Bordeaux, France)**: A first growth wine, Mouton Rothschild is celebrated for its finesse and elegance.\n\n5. **Château d'Yquem (Sauternes, France)**: A sweet white wine from the Sauternes region, known for its rich, honeyed flavors.\n\n6. **Champagne Dom Pérignon (Champagne, France)**: A highly sought-after sparkling wine, Dom Pérignon is known for its complexity and elegance.\n\n7. **Château Montrose (Bordeaux, France)**: A second growth wine from the Médoc region, known for its power and depth.\n\n8. **Château Le Pin (Bordeaux, France)**: A rare and highly sought-after wine, Le Pin is known for its exceptional quality and complexity.\n\n9. **Château de Beaucastel (Châteauneuf-du-Pape, France)**: A red wine from the Rhône region, known for its rich, full-bodied character.\n\n10. **Château de Beaucastel (Châteauneuf-du-Pape, France)**: A white wine from the Rhône region, known for its complexity and elegance.\n\nThese wines are highly regarded and can be found in many wine shops and restaurants. However, it's always a good idea to try different wines to find what you enjoy the most.","tool_calls":null}}]}},"error":null}
{"id":"batch-cd0da3ab-3-a7015699-b9f8-4bdf-928d-c4a29fc0c306","custom_id":"2","response":{"status_code":200,"body":{"id":"505471545c4245eeb82dce5409eff9e8","object":"chat.completion","model":"ministral-3b-latest","usage":{"prompt_tokens":11,"completion_tokens":256,"total_tokens":267},"created":1761577934,"choices":[{"index":0,"finish_reason":"length","message":{"role":"assistant","content":"Choosing the \"best\" French pastry can be quite subjective as it depends on personal preferences. However, here are a few that are often considered among the best:\n\n1. **Croissant**: A buttery, flaky pastry with a crispy exterior and soft, doughy interior. It's often enjoyed for breakfast or as a snack.\n\n2. **Macaron**: A meringue-based confection with a ganache or buttercream filling. They come in various flavors and are known for their delicate texture and vibrant colors.\n\n3. **Éclairs**: Long, thin pastries filled with cream and topped with chocolate icing. They are often enjoyed as a dessert or snack.\n\n4. **Tarte Tatin**: A caramelized apple tart, which is often served upside down with a scoop of ice cream.\n\n5. **Pain au Chocolat**: Similar to a croissant, but filled with chocolate. It's a popular breakfast pastry.\n\n6. **Madeleine**: Small, sponge-like cakes with a distinctive shell-like shape. They are often filled with jam or cream.\n\n7. **Chouquette**: A small, round pastry filled with cream and topped with sugar. It's a popular breakfast pastry.\n\n8.","tool_calls":null}}]}},"error":null}
```

    </TabItem>
</Tabs>

As a JSONL file, each line represents a request to the API Endpoint and Model.

<SectionTab as="h2" variant="secondary" sectionId="chat-completions-explained">Explanation</SectionTab>

The body request will follow the same format as the endpoint you want to run your batching, except the model id that will be provided only during the job creation to start the batch run. Below we provide an example of row with chat completions:

```py
{
    "custom_id": "2", # An ID as metadata that will be returned in the output file to identify the request
    "body": { # The body of the request
        "max_tokens": 256, # Max tokens corresponding to the max generated tokens for chat completions
        "temperature": 0.8, # The temperature to use for sampling
        "messages": [ # The messages to generate chat completions for
            {
                "role": "user", # The role of the messages author
                "content": "What is the best French pastry?" # The content of the message
            }
        ]
    }
}
```

For more information regarding completions, visit the [Chat Completions](completion) docs and the corresponding [API Spec](../api/endpoint/chat#operation-chat_completion_v1_chat_completions_post).